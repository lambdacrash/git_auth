{"name":"Git auth","tagline":"Apache module allowing HTTP authentication over multiple GIT repositories","body":"git_auth\r\n========\r\n\r\nApache module allowing HTTP authentication over multiple GIT repositories managed by `git-http-backend`. \r\n\r\nOverview\r\n--------\r\nThis module allows you to:\r\n* Use HTTP authentication instead of SSH\r\n* Use Apache for checking the credentials\r\n* Manage multiple users\r\n* Manage multiple repositories\r\n* Control the access per user, per repository\r\n* Centralize the configuration in one file\r\n* Use `git-web` for repository browsing\r\n\r\nHow to compile it?\r\n------------------\r\nIn order to compile the module, you need to get the Apache dev distribution installed on your system and then just type :\r\n```bash\r\nsudo apxs2 -c -i mod_git_auth.c\r\n````\r\nAfter the compilation, your new fresh module is deployed in your Apache server.\r\n\r\nHow to configure the rules?\r\n---------------------------\r\nThe module needs a configuration file containing the credentials and the description of roles like this\r\n```\r\n## Users\r\n# Generated using htpasswd\r\ntest1:$apr1$uMDe/sTo$714wfmKUlQbs61BkCr83U/\r\ntest2:$apr1$uMDe/sTo$714wfmKUlQbs61BkCr83U/\r\n\r\n## Repositories\r\n#git:repository_name\r\ngit:repo1\r\n#list of authorized users\r\nuser:test1\r\nuser:test2\r\n\r\n#git:repository_name\r\ngit:repo2\r\n#list of authorized users\r\nuser:test2\r\n```\r\n\r\nHow to configure your Apache?\r\n-----------------------------\r\nJust add these following lines in your `httpd.conf` or `apache2.conf`:\r\n```\r\n<Location /git>\r\n   AuthType basic\r\n   AuthuserFile /the/path/to/your/conf_file\r\n   AuthName \"Private GIT\"\r\n   AuthBasicProvider git_auth\r\n   Require valid-user\r\n</Location>\r\n```\r\nI assume here that all your repositories are in a `git` folder.\r\n\r\nAdd the module to `/etc/apache2/mods-available/`\r\n------------------------------------------------\r\nFile `git_auth.conf`:\r\n```\r\n<IfModule mod_git_auth.c>\r\n\r\n</IfModule>\r\n```\r\nFile `git_auth.load`:\r\n```\r\nLoadModule git_auth_module /usr/lib/apache2/modules/mod_git_auth.so\r\n```\r\n\r\nBuilding the module for ARM target\r\n----------------------------------\r\nFirst of all, you have to install **Qemu** and install **Debian Squeeze** \r\nfor **Arm** platform. The smartest way is to download `qcow2` image from <http://people.debian.org/~aurel32/qemu/armel/>\r\n\r\nSo, if you run under some kind of linux distrib, just type\r\n```\r\nsudo apt-get install qemu-kvm qemu-kvm-extras\r\nmkdir arm\r\nwget http://people.debian.org/~aurel32/qemu/armel/vmlinuz-2.6.32-5-versatile\r\nwget http://people.debian.org/~aurel32/qemu/armel/initrd.img-2.6.32-5-versatile\r\nwget http://people.debian.org/~aurel32/qemu/armel/debian_squeeze_armel_standard.qcow2\r\nqemu-system-arm -M versatilepb -kernel vmlinuz-2.6.32-5-versatile -initrd initrd.img-2.6.32-5-versatile -hda debian_squeeze_armel_standard.qcow2 -append \"root=/dev/sda1\"\r\n```\r\n\r\nThen, enter username and password (`root root`) and type:\r\n```\r\napt-get install apache2-prefork-dev\r\ncd /tmp\r\ngit clone git://github.com/lambdacrash/git_auth.git\r\ncd git_auth\r\napxs2 -c -i mod_git_auth.c\r\n```\r\nYour `.so` is located in something like `/usr/lib/apache2/modules/mod_git_auth.so`.\r\n\r\nExample of deploying this module on *Synology 411j*\r\n---------------------------------------------------\r\nJust copy your `.so` in `/usr/syno/apache/modules` and follow the instructions written at the top of this document.\r\nRestart `apache` with `/usr/syno/etc/rc.d/S97apache-user.sh restart` and it is done!! \r\n\r\n*********************\r\n* More informations about `git-http-backend` <https://www.kernel.org/pub/software/scm/git/docs/git-http-backend.html>\r\n* More informations about `qemu` <http://wiki.qemu.org/Main_Page>\r\n* More informations about `arm` emulation with `qemu` <http://people.debian.org/~aurel32/qemu/armel/>\r\n\r\n\r\nSpecial thanks to Sancho, Arnaud and Arnaud !!\r\n","google":"UA-39557802-1","note":"Don't delete this file! It's used internally to help with page regeneration."}